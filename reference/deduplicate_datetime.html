<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check Duplicated — deduplicate_datetime • fed3</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check Duplicated — deduplicate_datetime"><meta name="description" content="The precision of the FED clock is in seconds.
It might happen that two events have the same exact timestamp.
This helper function is used to check for duplicated entries and deduplicate them using methods.
This function is internally called by read_fed() and the user is advised to first try several examples before modifying deduplicate_method in read_fed()"><meta property="og:description" content="The precision of the FED clock is in seconds.
It might happen that two events have the same exact timestamp.
This helper function is used to check for duplicated entries and deduplicate them using methods.
This function is internally called by read_fed() and the user is advised to first try several examples before modifying deduplicate_method in read_fed()"><meta property="og:image" content="https://matiasandina.github.io/fed3/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fed3</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matiasandina/fed3/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check Duplicated</h1>
      <small class="dont-index">Source: <a href="https://github.com/matiasandina/fed3/blob/master/R/read_fed.R" class="external-link"><code>R/read_fed.R</code></a></small>
      <div class="d-none name"><code>deduplicate_datetime.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The precision of the FED clock is in seconds.
It might happen that two events have the same exact timestamp.
This helper function is used to check for duplicated entries and deduplicate them using methods.
This function is internally called by <code><a href="read_fed.html">read_fed()</a></code> and the user is advised to first try several examples before modifying <code>deduplicate_method</code> in <code><a href="read_fed.html">read_fed()</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">deduplicate_datetime</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"offset"</span>,</span>
<span>  offset <span class="op">=</span> <span class="st">"0.1 sec"</span>,</span>
<span>  reset_counts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reset_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pellet_Count"</span>, <span class="st">"Left_Poke_Count"</span>, <span class="st">"Right_Poke_Count"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>FED data frame as read by <code><a href="read_fed.html">read_fed()</a></code></p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The method to deduplicate the identical timestamps (default is 'offset'). <code>method</code> must be one of 'keep_first', 'keep_last', 'remove', or 'offset', or 'interpolate'.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>The offset to be added to duplicate datetimes (e.g., '0.1 sec').</p></dd>


<dt id="arg-reset-counts">reset_counts<a class="anchor" aria-label="anchor" href="#arg-reset-counts"></a></dt>
<dd><p>whether to reset the <code>reset_columns</code> or not (default = FALSE).</p></dd>


<dt id="arg-reset-columns">reset_columns<a class="anchor" aria-label="anchor" href="#arg-reset-columns"></a></dt>
<dd><p>The columns to be reset if <code>reset_counts = TRUE</code>.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># data contains datetimes that will fail to parse and are duplicated</span></span></span>
<span class="r-in"><span><span class="fu">fed3</span><span class="fu">::</span><span class="va">duplicate_test_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    datetime            Pellet_Count Left_Poke_Count Right_Poke_Count row_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-06-10 08:00:00            1               1               10      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-06-10 08:01:00            2               2                9      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-06-10 08:02:00            3               3                8      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-06-10 08:03:00            4               4                7      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-06-10 08:04:00            5               5                6      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-06-10 08:05:00            6               6                5      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-06-10 08:06:00            7               7                4      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-06-10 08:06:00            8               8                3      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> This will fail                <span style="color: #BB0000;">NA</span>               9                2      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-06-10 08:07:00           10              10                1     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2023-06-10 08:08:00            1               1               10     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2023-06-10 08:09:00            2               2                9     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2023-06-10 08:10:00            3               3                8     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> 2023-06-10 08:11:00            4               4                7     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> 2023-06-10 08:11:00            5               5                6     15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> 2023-06-10 08:12:00            6               6                5     16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> 2023-06-10 08:13:00            7               7                4     17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> This will fail too            <span style="color: #BB0000;">NA</span>               8                3     18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> 2023-06-10 08:14:00            9               9                2     19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span> 2023-06-10 08:15:00           10              10                1     20</span>
<span class="r-in"><span><span class="fu">fed3</span><span class="fu">:::</span><span class="fu">deduplicate_datetime</span><span class="op">(</span><span class="va">duplicate_test_data</span>, method <span class="op">=</span> <span class="st">'keep_first'</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span> 2 failed to parse.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NA values found in `datetime` column after parsing.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>  Filling NAs with last observation carried forward.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    datetime            Pellet_Count Left_Poke_Count Right_Poke_Count row_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-06-10 <span style="color: #949494;">08:00:00</span>            1               1               10      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-06-10 <span style="color: #949494;">08:01:00</span>            2               2                9      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-06-10 <span style="color: #949494;">08:02:00</span>            3               3                8      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-06-10 <span style="color: #949494;">08:03:00</span>            4               4                7      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-06-10 <span style="color: #949494;">08:04:00</span>            5               5                6      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-06-10 <span style="color: #949494;">08:05:00</span>            6               6                5      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-06-10 <span style="color: #949494;">08:06:00</span>            7               7                4      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-06-10 <span style="color: #949494;">08:07:00</span>           10              10                1     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-06-10 <span style="color: #949494;">08:08:00</span>            1               1               10     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-06-10 <span style="color: #949494;">08:09:00</span>            2               2                9     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2023-06-10 <span style="color: #949494;">08:10:00</span>            3               3                8     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2023-06-10 <span style="color: #949494;">08:11:00</span>            4               4                7     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2023-06-10 <span style="color: #949494;">08:12:00</span>            6               6                5     16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> 2023-06-10 <span style="color: #949494;">08:13:00</span>            7               7                4     17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> 2023-06-10 <span style="color: #949494;">08:14:00</span>            9               9                2     19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> 2023-06-10 <span style="color: #949494;">08:15:00</span>           10              10                1     20</span>
<span class="r-in"><span><span class="fu">fed3</span><span class="fu">:::</span><span class="fu">deduplicate_datetime</span><span class="op">(</span><span class="va">duplicate_test_data</span>, method <span class="op">=</span> <span class="st">'offset'</span>, offset <span class="op">=</span> <span class="st">"1 sec"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span> 2 failed to parse.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NA values found in `datetime` column after parsing.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>  Filling NAs with last observation carried forward.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    datetime            Pellet_Count Left_Poke_Count Right_Poke_Count row_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-06-10 <span style="color: #949494;">08:00:00</span>            1               1               10      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-06-10 <span style="color: #949494;">08:01:00</span>            2               2                9      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-06-10 <span style="color: #949494;">08:02:00</span>            3               3                8      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-06-10 <span style="color: #949494;">08:03:00</span>            4               4                7      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-06-10 <span style="color: #949494;">08:04:00</span>            5               5                6      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-06-10 <span style="color: #949494;">08:05:00</span>            6               6                5      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-06-10 <span style="color: #949494;">08:06:00</span>            7               7                4      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-06-10 <span style="color: #949494;">08:06:01</span>            8               8                3      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-06-10 <span style="color: #949494;">08:06:02</span>           <span style="color: #BB0000;">NA</span>               9                2      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-06-10 <span style="color: #949494;">08:07:00</span>           10              10                1     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2023-06-10 <span style="color: #949494;">08:08:00</span>            1               1               10     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2023-06-10 <span style="color: #949494;">08:09:00</span>            2               2                9     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2023-06-10 <span style="color: #949494;">08:10:00</span>            3               3                8     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> 2023-06-10 <span style="color: #949494;">08:11:00</span>            4               4                7     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> 2023-06-10 <span style="color: #949494;">08:11:01</span>            5               5                6     15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> 2023-06-10 <span style="color: #949494;">08:12:00</span>            6               6                5     16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> 2023-06-10 <span style="color: #949494;">08:13:00</span>            7               7                4     17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> 2023-06-10 <span style="color: #949494;">08:13:01</span>           <span style="color: #BB0000;">NA</span>               8                3     18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> 2023-06-10 <span style="color: #949494;">08:14:00</span>            9               9                2     19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span> 2023-06-10 <span style="color: #949494;">08:15:00</span>           10              10                1     20</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matias Andina.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

